<div ng-class="['steps-step', $ctrl.step_result.status]">
    <div class="steps-step-number">
        <span ng-class="{
            'tlp-badge-success': $ctrl.isPassed(),
            'tlp-badge-danger': $ctrl.isFailed(),
            'tlp-badge-info': $ctrl.isBlocked(),
            'tlp-badge-secondary': $ctrl.isNotRun()
        }">{{ $ctrl.step.rank }}</span>
    </div>
    <div class="steps-step-description">
        <div ng-bind-html="$ctrl.step.description"
            ng-if="$ctrl.step.description_format === 'html'"
        ></div>
        <div ng-if="$ctrl.step.description_format !== 'html'"
        ><p ng-bind-html="$ctrl.step.description" class="steps-step-description-text">{{ $ctrl.step.description }}</p></div>
        <div ng-if="$ctrl.step.expected_results" class="steps-step-expected">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="11" viewBox="0 0 16 11" class="steps-step-expected-arrow">
                <path fill-rule="evenodd" d="M0,9.42856359 L0,4 C-6.76353751e-17,3.44771525 0.44771525,3 1,3 C1.55228475,3 2,3.44771525 2,4 L2,9.14284897 L11.4285851,9.14284897 L11.4285851,7.14284658 C11.4285851,7.02677502 11.4910851,6.92856061 11.5982281,6.8839177 C11.7053711,6.83927479 11.8214427,6.85713196 11.9107285,6.92856061 L15.339304,10.0535643 C15.3928755,10.1071358 15.4285898,10.1785645 15.4285898,10.2589217 C15.4285898,10.339279 15.3928755,10.4196362 15.339304,10.4732077 L11.9107285,13.6339258 C11.8214427,13.714283 11.7053711,13.7321402 11.5982281,13.6874972 C11.5000137,13.6428543 11.4285851,13.5446399 11.4285851,13.4285684 L11.4285851,11.428566 L0.285714626,11.428566 C0.125000149,11.428566 0,11.3035658 0,11.1428514 L0,9.42856359 Z" transform="translate(0 -3)"/>
            </svg>
            <div>
                <div class="steps-step-expected-title">
                    {{::'Expected results' | translate}}
                </div>
                <div class="steps-step-expected-content"
                     ng-bind-html="$ctrl.step.expected_results"
                     ng-if="$ctrl.step.expected_results_format === 'html'"
                ></div>
                <div class="steps-step-expected-content"
                     ng-if="$ctrl.step.expected_results_format !== 'html'"
                ><p ng-bind-html="$ctrl.step.expected_results" class="steps-step-expected-text"></p></div>
            </div>
        </div>
    </div>
    <div class="tlp-dropdown steps-step-action">
        <div class="tlp-dropdown-split-button"
            ng-hide="$ctrl.execution.userCanReloadTestBecauseDefinitionIsUpdated"
        >
            <button class="tlp-dropdown-split-button-main tlp-button-secondary tlp-button-outline tlp-button-small steps-step-action-pass"
                type="button"
                ng-click="$ctrl.setToPassed()"
                ng-disabled="$ctrl.saving"
                ng-attr-title="{{:: 'Passed' | translate }}"
            >
                <i class="fa tlp-button-icon"
                    ng-class="{
                        'fa-circle-o-notch fa-spin': $ctrl.saving,
                        'fa-check-circle': ! $ctrl.saving
                    }"
                ></i>
            </button>
            <button class="tlp-button-secondary tlp-button-outline tlp-button-small tlp-append tlp-dropdown-split-button-caret steps-step-action-dropdown-trigger"
                ng-disabled="$ctrl.saving"
                ng-click="$ctrl.openDropdown()"
            >
                <i class="fa fa-caret-down"></i>
            </button>
        </div>
        <div class="tlp-dropdown-menu tlp-dropdown-menu-right steps-step-action-dropdown" role="menu">
            <a class="tlp-dropdown-menu-item steps-step-action-fail"
                ng-class="{ 'steps-step-action-disabled': $ctrl.saving }"
                role="menuitem"
                ng-click="$ctrl.setToFailed()"
            >
                <i class="fa fa-fw fa-times-circle"></i> {{::'Failed' | translate }}
            </a>
            <a class="tlp-dropdown-menu-item steps-step-action-block"
                ng-class="{ 'steps-step-action-disabled': $ctrl.saving }"
                role="menuitem"
                ng-click="$ctrl.setToBlocked()"
            >
                <i class="fa fa-fw fa-exclamation-circle"></i> {{::'Blocked' | translate }}
            </a>
            <a class="tlp-dropdown-menu-item steps-step-action-notrun"
                ng-class="{ 'steps-step-action-disabled': $ctrl.saving }"
                role="menuitem"
                ng-click="$ctrl.setToNotRun()"
            >
                <i class="fa fa-fw fa-question-circle"></i> {{::'Not run' | translate }}
            </a>
        </div>
    </div>
</div>
